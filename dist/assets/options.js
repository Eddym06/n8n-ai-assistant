import{c as Y,R as t,r as s,m as f}from"./tailwind.js";import{m as J}from"./mo.umd.js";import{A as Q}from"./index.js";function c(l,E=""){const[x,p]=s.useState(E);return s.useEffect(()=>{chrome.storage.sync.get([l],d=>{d[l]!==void 0&&p(d[l])})},[l]),[x,p,d=>new Promise(i=>chrome.storage.sync.set({[l]:d},i))]}function Z(){const[l,E,x]=c("llmProvider","openai"),[p,M,d]=c("apiKey",""),[i,$,T]=c("model",""),[R,K,U]=c("offlineMode",!1),[C,B,F]=c("serverUrl",""),[A,q,H]=c("ghToken",""),[O,_,j]=c("ghOwner",""),[P,D,V]=c("ghRepo",""),[W,S]=s.useState(!1),w=s.useRef(null),[b,h]=s.useState(""),[z,g]=s.useState(""),G=s.useRef(null),y={openai:[{value:"gpt-4o-mini",label:"gpt-4o-mini (rápido)"},{value:"gpt-4o",label:"gpt-4o (calidad)"},{value:"gpt-3.5-turbo",label:"gpt-3.5-turbo (legacy)"}],gemini:[{value:"gemini-1.5-flash",label:"gemini-1.5-flash (rápido)"},{value:"gemini-1.5-pro",label:"gemini-1.5-pro (calidad)"}],grok:[{value:"grok-beta",label:"grok-beta"},{value:"grok-4",label:"grok-4"}]};s.useEffect(()=>{var o,n,r;const e=((o=y[l])==null?void 0:o.map(m=>m.value))||[];if(!i){const m=((r=(n=y[l])==null?void 0:n[0])==null?void 0:r.value)||"";h(m||"custom"),g("");return}e.includes(i)?(h(i),g("")):(h("custom"),g(i))},[l,i]),s.useEffect(()=>{const e=w.current;if(!e)return;const o=n=>{const r=e.getBoundingClientRect(),m=r.left+r.width/2,u=r.top+r.height/2;new J.Burst({left:m,top:u,radius:{10:40},count:10,children:{shape:"circle",fill:["#10b981","#34d399","#a7f3d0"],radius:{4:0},duration:700}}).play()};return e.addEventListener("click",o),()=>e.removeEventListener("click",o)},[w.current]),s.useEffect(()=>{const e=G.current;if(!e)return;const o=e.getContext("2d");let n=window.devicePixelRatio||1;const r=()=>{e.width=Math.floor(window.innerWidth*n),e.height=Math.floor(window.innerHeight*n),e.style.width="100%",e.style.height="100%"};r(),window.addEventListener("resize",r);const m=Array.from({length:40}).map(()=>({x:Math.random()*e.width,y:Math.random()*e.height,vx:(Math.random()-.5)*.2*n,vy:(Math.random()-.5)*.2*n,r:(Math.random()*2+.5)*n,c:["#10b98122","#3b82f622","#a855f722"][Math.floor(Math.random()*3)]})),u={x:-9999,y:-9999},L=a=>{const v=e.getBoundingClientRect();u.x=(a.clientX-v.left)*n,u.y=(a.clientY-v.top)*n};window.addEventListener("mousemove",L);let N;const I=()=>{o.clearRect(0,0,e.width,e.height);for(const a of m){a.x+=a.vx,a.y+=a.vy,(a.x<0||a.x>e.width)&&(a.vx*=-1),(a.y<0||a.y>e.height)&&(a.vy*=-1);const v=u.x-a.x,k=u.y-a.y;v*v+k*k<12e3*n&&(a.vx+=v*2e-5,a.vy+=k*2e-5),o.beginPath(),o.arc(a.x,a.y,a.r,0,Math.PI*2),o.fillStyle=a.c,o.fill()}N=requestAnimationFrame(I)};return N=requestAnimationFrame(I),()=>{cancelAnimationFrame(N),window.removeEventListener("mousemove",L),window.removeEventListener("resize",r)}},[]);const X=async()=>{const e=b==="custom"?z:b;await Promise.all([x(l),d(p),T(e),U(R),F(C),H(A),j(O),V(P)]),S(!0),setTimeout(()=>S(!1),1200)};return t.createElement("div",{className:"min-h-screen relative overflow-hidden"},t.createElement("canvas",{ref:G,className:"absolute inset-0 -z-10"}),t.createElement("div",{className:"absolute inset-0 -z-10 animate-pulse",style:{filter:"blur(32px)"}},t.createElement("div",{className:"absolute -top-32 -left-24 w-[40rem] h-[40rem] rounded-full bg-emerald-400/30"}),t.createElement("div",{className:"absolute top-1/3 -right-20 w-[36rem] h-[36rem] rounded-full bg-blue-400/25"}),t.createElement("div",{className:"absolute bottom-0 left-1/2 w-[44rem] h-[44rem] -translate-x-1/2 rounded-full bg-fuchsia-400/20"})),t.createElement("div",{className:"max-w-3xl mx-auto p-8"},t.createElement(f.h1,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"text-2xl font-bold mb-6"},"Enhanced n8n AI Assistant – Configuración"),t.createElement("div",{className:"grid md:grid-cols-2 gap-6"},t.createElement(f.div,{layout:!0,className:"bg-white/80 dark:bg-zinc-900/70 border border-zinc-200 dark:border-zinc-700 rounded-xl p-5 shadow"},t.createElement("div",{className:"text-sm font-semibold mb-2"},"LLM"),t.createElement("label",{className:"block text-xs mb-1"},"Proveedor"),t.createElement("select",{className:"w-full border rounded p-2 mb-3",value:l,onChange:e=>E(e.target.value)},t.createElement("option",{value:"openai"},"OpenAI"),t.createElement("option",{value:"gemini"},"Google Gemini"),t.createElement("option",{value:"grok"},"xAI Grok")),t.createElement("label",{className:"block text-xs mb-1"},"Modelo"),t.createElement("select",{className:"w-full border rounded p-2 mb-2",value:b,onChange:e=>h(e.target.value)},(y[l]||[]).map(e=>t.createElement("option",{key:e.value,value:e.value},e.label)),t.createElement("option",{value:"custom"},"Otro (custom)")),b==="custom"&&t.createElement("input",{className:"w-full border rounded p-2 mb-3",value:z,onChange:e=>g(e.target.value),placeholder:"modelo personalizado"}),t.createElement("label",{className:"inline-flex items-center gap-2 text-xs mb-3"},t.createElement("input",{type:"checkbox",checked:!!R,onChange:e=>K(e.target.checked)})," Modo Offline"),t.createElement("label",{className:"block text-xs mb-1"},"API Key"),t.createElement("input",{type:"password",className:"w-full border rounded p-2 mb-3",value:p,onChange:e=>M(e.target.value),placeholder:"sk-..."})),t.createElement(f.div,{layout:!0,className:"bg-white/80 dark:bg-zinc-900/70 border border-zinc-200 dark:border-zinc-700 rounded-xl p-5 shadow"},t.createElement("div",{className:"text-sm font-semibold mb-2"},"Integraciones"),t.createElement("label",{className:"block text-xs mb-1"},"Server URL (Proxy)"),t.createElement("input",{className:"w-full border rounded p-2 mb-3",value:C,onChange:e=>B(e.target.value),placeholder:"http://localhost:8787"}),t.createElement("div",{className:"text-sm font-medium mb-1"},"GitHub"),t.createElement("label",{className:"block text-xs mb-1"},"Token"),t.createElement("input",{type:"password",className:"w-full border rounded p-2 mb-3",value:A,onChange:e=>q(e.target.value),placeholder:"ghp_..."}),t.createElement("div",{className:"grid grid-cols-2 gap-2"},t.createElement("div",null,t.createElement("label",{className:"block text-xs mb-1"},"Owner"),t.createElement("input",{className:"w-full border rounded p-2 mb-3",value:O,onChange:e=>_(e.target.value),placeholder:"usuario"})),t.createElement("div",null,t.createElement("label",{className:"block text-xs mb-1"},"Repo"),t.createElement("input",{className:"w-full border rounded p-2 mb-3",value:P,onChange:e=>D(e.target.value),placeholder:"repo"}))))),t.createElement("div",{className:"mt-6"},t.createElement("button",{ref:w,onClick:X,className:"px-5 py-2 rounded bg-emerald-600 text-white shadow hover:shadow-lg transition-all"},"Guardar"),t.createElement(Q,null,W&&t.createElement(f.span,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},className:"ml-3 text-emerald-600"},"Guardado ✓")))))}Y(document.getElementById("root")).render(t.createElement(Z,null));
